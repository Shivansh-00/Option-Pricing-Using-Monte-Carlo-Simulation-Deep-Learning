<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OptionQuant ‚Äî Monte Carlo & Deep Learning Pricing</title>
  <meta name="description" content="Conference-grade option pricing platform using Monte Carlo simulation & deep learning" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Ambient BG -->
  <div class="ambient-bg"><div class="orb"></div><div class="orb"></div><div class="orb"></div></div>

  <!-- Sidebar Overlay (mobile) -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <div class="app-shell">
    <!-- ‚ïê‚ïê‚ïê Sidebar ‚ïê‚ïê‚ïê -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-brand">
        <div class="logo">OQ</div>
        <h1>OptionQuant<span>Monte Carlo &amp; Deep Learning</span></h1>
      </div>

      <nav class="sidebar-nav" id="nav">
        <div class="nav-label">Analytics</div>
        <div class="nav-item active" data-section="pricing">
          <span class="icon">üìä</span> Option Pricing
        </div>
        <div class="nav-item" data-section="greeks">
          <span class="icon">Œî</span> Greeks Analysis
        </div>
        <div class="nav-item" data-section="monte-carlo">
          <span class="icon">üé≤</span> Monte Carlo
        </div>

        <div class="nav-label">Intelligence</div>
        <div class="nav-item" data-section="deep-learning">
          <span class="icon">üß†</span> Deep Learning
        </div>
        <div class="nav-item" data-section="ml-volatility">
          <span class="icon">üìà</span> ML Volatility
        </div>

        <div class="nav-label">Research</div>
        <div class="nav-item" data-section="explainability">
          <span class="icon">üí°</span> AI Explainability
        </div>
      </nav>

      <!-- User Card -->
      <div class="sidebar-user">
        <div class="user-card" id="userCard">
          <div class="user-avatar" id="userAvatar">?</div>
          <div class="user-info">
            <div class="user-name" id="userName">Loading‚Ä¶</div>
            <div class="user-role" id="userRole">Analyst</div>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="sidebar-actions">
        <div class="action-btn" id="themeToggle">
          <span class="icon" id="themeIcon">üåô</span> Toggle Theme
        </div>
        <div class="action-btn" id="healthBtn">
          <span class="icon">üîó</span> <span id="healthLabel">Check API</span>
        </div>
        <div class="action-btn danger" id="logoutBtn">
          <span class="icon">üö™</span> Sign Out
        </div>
      </div>
    </aside>

    <!-- ‚ïê‚ïê‚ïê Main ‚ïê‚ïê‚ïê -->
    <main class="main-content">
      <header class="topbar">
        <div class="topbar-left">
          <button class="mobile-toggle" id="mobileToggle" aria-label="Toggle sidebar">‚ò∞</button>
          <div>
            <div class="page-title" id="pageTitle">Option Pricing</div>
            <div class="page-subtitle" id="pageSubtitle">Black-Scholes & Monte Carlo engines</div>
          </div>
        </div>
        <div class="topbar-right">
          <div class="status-pill" id="healthBtn2" title="Click to check backend health">
            <span class="status-dot" id="statusDot"></span>
            <span id="statusText">Checking‚Ä¶</span>
          </div>
        </div>
      </header>

      <div class="content-area">
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 1. PRICING ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section active" id="sec-pricing">
          <div class="section-header">
            <div class="section-title">‚ö° Option Pricing Engine</div>
            <div class="section-desc">Compute fair values using Black-Scholes analytics and Monte Carlo simulation simultaneously</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">üìê</span> Parameters</div>
              <span class="result-badge" id="resultBadge" style="display:none">‚Äî</span>
            </div>

            <div class="form-grid">
              <div class="field">
                <label for="spot">Spot Price ($)</label>
                <input type="number" id="spot" value="100" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="strike">Strike Price ($)</label>
                <input type="number" id="strike" value="100" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="rate">Risk-Free Rate</label>
                <input type="number" id="rate" value="0.05" step="0.001" />
              </div>
              <div class="field">
                <label for="sigma">Volatility (œÉ)</label>
                <input type="number" id="sigma" value="0.2" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="maturity">Maturity (years)</label>
                <input type="number" id="maturity" value="1" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="optType">Option Type</label>
                <select id="optType">
                  <option value="call">Call Option</option>
                  <option value="put">Put Option</option>
                </select>
              </div>
            </div>

            <div class="btn-group">
              <button class="btn btn-primary" id="priceBtn">‚ö° Price Option</button>
              <button class="btn btn-secondary" id="resetBtn">‚Üª Reset</button>
            </div>
          </div>

          <!-- Pricing Results -->
          <div class="metrics-row" id="pricingResults" style="display:none">
            <div class="metric-card">
              <div class="metric-label">Black-Scholes</div>
              <div class="metric-value highlight" id="bsPrice">‚Äî</div>
              <div class="metric-sub">Analytical Solution</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Monte Carlo</div>
              <div class="metric-value highlight" id="mcPrice">‚Äî</div>
              <div class="metric-sub">Simulation Estimate</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">MC Std Error</div>
              <div class="metric-value" id="mcStd">‚Äî</div>
              <div class="metric-sub">Standard Deviation</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">95% Confidence</div>
              <div class="metric-value" id="mcCI">‚Äî</div>
              <div class="metric-sub">Interval</div>
            </div>
          </div>

          <!-- Greeks Quick View -->
          <div class="greeks-grid" id="greeksQuick" style="display:none">
            <div class="greek-card" data-greek="delta">
              <div class="greek-symbol">Œî</div>
              <div class="greek-name">Delta</div>
              <div class="greek-value" id="qDelta">‚Äî</div>
            </div>
            <div class="greek-card" data-greek="gamma">
              <div class="greek-symbol">Œì</div>
              <div class="greek-name">Gamma</div>
              <div class="greek-value" id="qGamma">‚Äî</div>
            </div>
            <div class="greek-card" data-greek="theta">
              <div class="greek-symbol">Œò</div>
              <div class="greek-name">Theta</div>
              <div class="greek-value" id="qTheta">‚Äî</div>
            </div>
            <div class="greek-card" data-greek="vega">
              <div class="greek-symbol">ŒΩ</div>
              <div class="greek-name">Vega</div>
              <div class="greek-value" id="qVega">‚Äî</div>
            </div>
            <div class="greek-card" data-greek="rho">
              <div class="greek-symbol">œÅ</div>
              <div class="greek-name">Rho</div>
              <div class="greek-value" id="qRho">‚Äî</div>
            </div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 2. GREEKS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-greeks">
          <div class="section-header">
            <div class="section-title">Œî Greeks Surface Analysis</div>
            <div class="section-desc">Visualise sensitivity across the strike/spot spectrum</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">üéØ</span> Surface Parameters</div>
            </div>
            <div class="form-grid">
              <div class="field">
                <label for="greekSelect">Greek</label>
                <select id="greekSelect">
                  <option value="delta">Delta (Œî)</option>
                  <option value="gamma">Gamma (Œì)</option>
                  <option value="theta">Theta (Œò)</option>
                  <option value="vega">Vega (ŒΩ)</option>
                  <option value="rho">Rho (œÅ)</option>
                </select>
              </div>
              <div class="field">
                <label for="greekRange">Spot Range (%)</label>
                <input type="number" id="greekRange" value="30" min="5" max="80" step="5" />
              </div>
            </div>
            <div class="btn-group">
              <button class="btn btn-primary" id="plotGreekBtn">üìà Plot Surface</button>
            </div>
          </div>

          <div class="chart-container" style="display:none" id="greekChartWrap">
            <canvas id="greekChart"></canvas>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 3. MONTE CARLO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-monte-carlo">
          <div class="section-header">
            <div class="section-title">üé≤ Monte Carlo Simulation</div>
            <div class="section-desc">Geometric Brownian Motion path simulation with convergence analysis</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">‚öôÔ∏è</span> Simulation Settings</div>
            </div>
            <div class="mc-controls">
              <div class="field">
                <label for="mcPaths">Paths</label>
                <input type="number" id="mcPaths" value="200" min="10" max="2000" step="10" />
              </div>
              <div class="field">
                <label for="mcSteps">Steps</label>
                <input type="number" id="mcSteps" value="252" min="50" max="1000" step="1" />
              </div>
              <button class="btn btn-accent" id="simBtn">‚ñ∂ Run Simulation</button>
            </div>
          </div>

          <div class="charts-grid" id="mcChartsWrap" style="display:none">
            <div class="chart-container">
              <div class="card-title mb-4"><span class="icon">üìâ</span> Price Paths (GBM)</div>
              <canvas id="mcChart"></canvas>
            </div>
            <div class="chart-container">
              <div class="card-title mb-4"><span class="icon">üìä</span> Convergence</div>
              <canvas id="convChart"></canvas>
            </div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 4. DEEP LEARNING ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-deep-learning">
          <div class="section-header">
            <div class="section-title">üß† Deep Learning Forecast</div>
            <div class="section-desc">LSTM &amp; Transformer neural-network pricing with benchmark comparison</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">üî¨</span> Model Input</div>
            </div>
            <div class="form-grid">
              <div class="field">
                <label for="dlSpot">Spot</label>
                <input type="number" id="dlSpot" value="100" step="0.01" />
              </div>
              <div class="field">
                <label for="dlStrike">Strike</label>
                <input type="number" id="dlStrike" value="100" step="0.01" />
              </div>
              <div class="field">
                <label for="dlMaturity">Maturity</label>
                <input type="number" id="dlMaturity" value="1" step="0.01" />
              </div>
              <div class="field">
                <label for="dlRate">Rate</label>
                <input type="number" id="dlRate" value="0.05" step="0.001" />
              </div>
              <div class="field">
                <label for="dlSigma">Volatility</label>
                <input type="number" id="dlSigma" value="0.2" step="0.01" />
              </div>
              <div class="field">
                <label for="dlType">Type</label>
                <select id="dlType">
                  <option value="call">Call</option>
                  <option value="put">Put</option>
                </select>
              </div>
            </div>
            <div class="btn-group">
              <button class="btn btn-primary" id="dlBtn">üß† Forecast</button>
            </div>
          </div>

          <div class="dl-results" id="dlResults" style="display:none">
            <div class="metric-card">
              <div class="metric-label">DL Forecast</div>
              <div class="metric-value highlight" id="dlForecast">‚Äî</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Forecast Vol</div>
              <div class="metric-value" id="dlVol">‚Äî</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Residual</div>
              <div class="metric-value" id="dlResidual">‚Äî</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">BS Benchmark</div>
              <div class="metric-value" id="dlBS">‚Äî</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">MC Benchmark</div>
              <div class="metric-value" id="dlMC">‚Äî</div>
            </div>
          </div>

          <div class="chart-container" id="compChartWrap" style="display:none">
            <div class="card-title mb-4"><span class="icon">üìä</span> Model Comparison</div>
            <canvas id="compChart"></canvas>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 5. ML VOLATILITY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-ml-volatility">
          <div class="section-header">
            <div class="section-title">üìà ML Implied Volatility</div>
            <div class="section-desc">Machine learning implied volatility prediction with regime detection</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">üîÆ</span> Market Features</div>
            </div>
            <div class="form-grid">
              <div class="field">
                <label for="mlSpot">Spot Price</label>
                <input type="number" id="mlSpot" value="100" step="0.01" />
              </div>
              <div class="field">
                <label for="mlRate">Interest Rate</label>
                <input type="number" id="mlRate" value="0.05" step="0.001" />
              </div>
              <div class="field">
                <label for="mlMat">Maturity</label>
                <input type="number" id="mlMat" value="0.5" step="0.01" />
              </div>
              <div class="field">
                <label for="mlRvol">Realized Vol</label>
                <input type="number" id="mlRvol" value="0.18" step="0.01" />
              </div>
              <div class="field">
                <label for="mlVix">VIX Level</label>
                <input type="number" id="mlVix" value="20" step="0.1" />
              </div>
              <div class="field">
                <label for="mlSkew">Skew Index</label>
                <input type="number" id="mlSkew" value="-0.15" step="0.01" />
              </div>
            </div>
            <div class="btn-group">
              <button class="btn btn-primary" id="mlBtn">üìà Predict IV</button>
            </div>
          </div>

          <div class="metrics-row" id="mlResults" style="display:none">
            <div class="metric-card">
              <div class="metric-label">Implied Volatility</div>
              <div class="metric-value highlight" id="mlIV">‚Äî</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Market Regime</div>
              <div class="metric-value" id="mlRegime">‚Äî</div>
            </div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 6. AI EXPLAINABILITY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-explainability">
          <div class="section-header">
            <div class="section-title">üí° AI Explainability Engine</div>
            <div class="section-desc">RAG-powered Q&amp;A ‚Äî ask anything about quantitative finance</div>
          </div>

          <!-- RAG Stats Bar -->
          <div class="rag-stats-bar" id="ragStatsBar">
            <div class="rag-stat-item">
              <span class="rag-stat-icon">üìö</span>
              <span class="rag-stat-value" id="ragDocCount">‚Äî</span>
              <span class="rag-stat-label">Chunks</span>
            </div>
            <div class="rag-stat-item">
              <span class="rag-stat-icon">üìÑ</span>
              <span class="rag-stat-value" id="ragSourceCount">‚Äî</span>
              <span class="rag-stat-label">Sources</span>
            </div>
            <div class="rag-stat-item">
              <span class="rag-stat-icon">‚ö°</span>
              <span class="rag-stat-value" id="ragAvgLatency">‚Äî</span>
              <span class="rag-stat-label">Avg ms</span>
            </div>
            <div class="rag-stat-item">
              <span class="rag-stat-icon">üéØ</span>
              <span class="rag-stat-value" id="ragCacheRate">‚Äî</span>
              <span class="rag-stat-label">Cache Hit</span>
            </div>
          </div>

          <div class="card">
            <div class="chat-area" id="chatArea"></div>

            <div class="chat-input-row">
              <input type="text" id="ragInput" placeholder="Ask about Black-Scholes, Greeks, Monte Carlo, Heston, hedging‚Ä¶" />
              <button class="btn btn-primary" id="ragBtn">Ask ‚Üí</button>
            </div>

            <!-- Follow-up suggestions (dynamic) -->
            <div class="follow-ups" id="followUps" style="display:none">
              <span class="follow-up-label">Suggested:</span>
              <div class="follow-up-chips" id="followUpChips"></div>
            </div>

            <div class="quick-chips" id="quickChips">
              <span class="chip" data-q="Explain the Black-Scholes formula">Black-Scholes</span>
              <span class="chip" data-q="What are the Greeks in option pricing?">Greeks Basics</span>
              <span class="chip" data-q="How does Monte Carlo simulation price options?">Monte Carlo</span>
              <span class="chip" data-q="Compare LSTM vs Transformer for pricing">DL Comparison</span>
              <span class="chip" data-q="What is implied volatility surface?">IV Surface</span>
              <span class="chip" data-q="How does the Heston stochastic volatility model work?">Heston Model</span>
              <span class="chip" data-q="What variance reduction techniques improve Monte Carlo?">Variance Reduction</span>
              <span class="chip" data-q="When should you exercise an American option early?">American Options</span>
              <span class="chip" data-q="How does delta-gamma hedging work?">Delta-Gamma Hedge</span>
            </div>
          </div>

          <div class="rag-meta" id="ragMeta" style="display:none">
            <div class="rag-meta-top">
              <div class="confidence-section">
                <div class="confidence-label">
                  <span>Confidence</span>
                  <span id="confLabel">0%</span>
                </div>
                <div class="confidence-bar">
                  <div class="confidence-fill" id="confFill"></div>
                </div>
              </div>
              <div class="rag-meta-badges">
                <span class="rag-badge" id="queryTypeBadge">‚Äî</span>
                <span class="rag-badge" id="latencyBadge">‚Äî</span>
                <span class="rag-badge rag-badge-cache" id="cacheBadge" style="display:none">‚ö° cached</span>
              </div>
            </div>
            <div class="source-list" id="sourceList"></div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toasts"></div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div>
      <div class="spinner"></div>
      <div class="loading-text">Computing‚Ä¶</div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
