<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OptionQuant ‚Äî Monte Carlo & Deep Learning Pricing</title>
  <meta name="description" content="Conference-grade option pricing platform using Monte Carlo simulation & deep learning" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="premium.css" />
</head>
<body>
  <!-- Ambient BG -->
  <div class="ambient-bg"><div class="orb"></div><div class="orb"></div><div class="orb"></div><div class="orb"></div></div>

  <!-- Grid & Mesh Background -->
  <div class="grid-bg"></div>
  <div class="mesh-gradient"></div>

  <!-- Sidebar Overlay (mobile) -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <div class="app-shell">
    <!-- ‚ïê‚ïê‚ïê Sidebar ‚ïê‚ïê‚ïê -->
    <aside class="sidebar" id="sidebar">
      <!-- Cursor spotlight glow layer -->
      <div class="sidebar-glow" aria-hidden="true"></div>

      <div class="sidebar-brand">
        <div class="logo">OQ</div>
        <h1>OptionQuant<span>Enterprise Platform</span></h1>
        <button class="sidebar-collapse-btn" id="sidebarCollapseBtn" title="Toggle compact mode" aria-label="Toggle compact mode">‚Äπ</button>
      </div>

      <div class="sidebar-divider" aria-hidden="true"></div>

      <nav class="sidebar-nav" id="nav" role="navigation" aria-label="Main navigation">
        <div class="nav-label"><span class="nav-label-text">Overview</span></div>
        <div class="nav-item active" data-section="dashboard" tabindex="0" role="button" title="Dashboard">
          <span class="icon">‚óà</span> <span class="nav-text">Dashboard</span>
        </div>

        <div class="nav-label"><span class="nav-label-text">Analytics</span></div>
        <div class="nav-item" data-section="pricing" tabindex="0" role="button" title="Option Pricing">
          <span class="icon">‚óÜ</span> <span class="nav-text">Option Pricing</span>
        </div>
        <div class="nav-item" data-section="greeks" tabindex="0" role="button" title="Greeks Analysis">
          <span class="icon">Œî</span> <span class="nav-text">Greeks Analysis</span>
        </div>
        <div class="nav-item" data-section="monte-carlo" tabindex="0" role="button" title="Monte Carlo">
          <span class="icon">‚¨°</span> <span class="nav-text">Monte Carlo</span>
        </div>

        <div class="nav-label"><span class="nav-label-text">Intelligence</span></div>
        <div class="nav-item" data-section="deep-learning" tabindex="0" role="button" title="Deep Learning">
          <span class="icon">‚óé</span> <span class="nav-text">Deep Learning</span>
        </div>
        <div class="nav-item" data-section="ml-volatility" tabindex="0" role="button" title="ML Volatility">
          <span class="icon">‚äû</span> <span class="nav-text">ML Volatility</span>
        </div>
        <div class="nav-item" data-section="sentiment" tabindex="0" role="button" title="Market Sentiment">
          <span class="icon">‚óâ</span> <span class="nav-text">Market Sentiment</span>
        </div>

        <div class="nav-label"><span class="nav-label-text">Research</span></div>
        <div class="nav-item" data-section="risk-analytics" tabindex="0" role="button" title="Risk Analytics">
          <span class="icon">‚äò</span> <span class="nav-text">Risk Analytics</span>
        </div>
        <div class="nav-item" data-section="explainability" tabindex="0" role="button" title="AI Explainability">
          <span class="icon">‚óá</span> <span class="nav-text">AI Explainability</span>
        </div>
      </nav>

      <div class="sidebar-divider" aria-hidden="true"></div>

      <!-- User Card -->
      <div class="sidebar-user">
        <div class="user-card" id="userCard">
          <div class="user-avatar" id="userAvatar">?</div>
          <div class="user-info">
            <div class="user-name" id="userName">Loading‚Ä¶</div>
            <div class="user-role" id="userRole">Analyst</div>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="sidebar-actions">
        <div class="action-btn" id="themeToggle">
          <span class="icon" id="themeIcon">üåô</span> Toggle Theme
        </div>
        <div class="action-btn" id="healthBtn">
          <span class="icon">üîó</span> <span id="healthLabel">Check API</span>
        </div>
        <div class="action-btn danger" id="logoutBtn">
          <span class="icon">üö™</span> Sign Out
        </div>
      </div>
    </aside>

    <!-- ‚ïê‚ïê‚ïê Main ‚ïê‚ïê‚ïê -->
    <main class="main-content">
      <header class="topbar">
        <div class="topbar-left">
          <button class="mobile-toggle" id="mobileToggle" aria-label="Toggle sidebar" aria-expanded="false" aria-controls="sidebar">‚ò∞</button>
          <div>
            <div class="page-title" id="pageTitle">Option Pricing</div>
            <div class="page-subtitle" id="pageSubtitle">Black-Scholes & Monte Carlo engines</div>
          </div>
        </div>
        <div class="topbar-right">
          <div class="status-pill" id="healthBtn2" title="Click to check backend health">
            <span class="status-dot" id="statusDot"></span>
            <span id="statusText">Checking‚Ä¶</span>
          </div>
        </div>
      </header>

      <div class="content-area">
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 0. DASHBOARD ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section active" id="sec-dashboard">
          <div class="section-header">
            <div class="section-title">‚óà Dashboard Overview</div>
            <div class="section-desc">Enterprise option pricing platform ‚Äî system health &amp; quick actions</div>
          </div>

          <!-- Key Metrics -->
          <div class="metrics-row" id="dashMetrics">
            <div class="metric-card dash-card">
              <div class="metric-label">System Status</div>
              <div class="metric-value highlight" id="dashStatus">‚óè Checking‚Ä¶</div>
              <div class="metric-sub">API Health</div>
            </div>
            <div class="metric-card dash-card">
              <div class="metric-label">Pricing Models</div>
              <div class="metric-value" id="dashModels">3</div>
              <div class="metric-sub">BS ¬∑ MC ¬∑ DL</div>
            </div>
            <div class="metric-card dash-card">
              <div class="metric-label">ML Models</div>
              <div class="metric-value" id="dashMLModels">7</div>
              <div class="metric-sub">Ridge ¬∑ RF ¬∑ GBM ¬∑ ‚Ä¶</div>
            </div>
            <div class="metric-card dash-card">
              <div class="metric-label">DL Status</div>
              <div class="metric-value" id="dashDLStatus">Ready</div>
              <div class="metric-sub">LSTM + Transformer</div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">‚ö°</span> Quick Actions</div>
            </div>
            <div class="dash-actions">
              <button class="btn btn-primary dash-action-btn" data-goto="pricing">‚óÜ Price Option</button>
              <button class="btn btn-secondary dash-action-btn" data-goto="monte-carlo">‚¨° Run Simulation</button>
              <button class="btn btn-secondary dash-action-btn" data-goto="deep-learning">‚óé DL Forecast</button>
              <button class="btn btn-secondary dash-action-btn" data-goto="sentiment">‚óâ Analyze Sentiment</button>
              <button class="btn btn-secondary dash-action-btn" data-goto="risk-analytics">‚äò Risk Analysis</button>
              <button class="btn btn-accent dash-action-btn" data-goto="explainability">‚óá Ask AI</button>
            </div>
          </div>

          <!-- Platform Capabilities -->
          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">üèõ</span> Platform Capabilities</div>
            </div>
            <div class="dash-capabilities">
              <div class="capability-item">
                <div class="capability-icon">üìê</div>
                <div>
                  <div class="capability-title">Black-Scholes Analytics</div>
                  <div class="capability-desc">Closed-form option pricing with full Greeks (Œî, Œì, Œò, ŒΩ, œÅ)</div>
                </div>
              </div>
              <div class="capability-item">
                <div class="capability-icon">‚¨°</div>
                <div>
                  <div class="capability-title">Monte Carlo Engine</div>
                  <div class="capability-desc">GBM paths with antithetic, stratified &amp; control variate methods</div>
                </div>
              </div>
              <div class="capability-item">
                <div class="capability-icon">‚óé</div>
                <div>
                  <div class="capability-title">Deep Learning Models</div>
                  <div class="capability-desc">LSTM price prediction + Transformer sentiment analysis</div>
                </div>
              </div>
              <div class="capability-item">
                <div class="capability-icon">‚äû</div>
                <div>
                  <div class="capability-title">ML Volatility Engine</div>
                  <div class="capability-desc">7-model ensemble with walk-forward validation</div>
                </div>
              </div>
              <div class="capability-item">
                <div class="capability-icon">‚óâ</div>
                <div>
                  <div class="capability-title">Market Sentiment NLP</div>
                  <div class="capability-desc">Financial news analysis with transformer-based attention</div>
                </div>
              </div>
              <div class="capability-item">
                <div class="capability-icon">‚óá</div>
                <div>
                  <div class="capability-title">RAG-Powered AI</div>
                  <div class="capability-desc">Knowledge-augmented Q&amp;A with BM25+ hybrid retrieval</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Version Info -->
          <div class="card" style="margin-top:0.5rem">
            <div class="card-header">
              <div class="card-title"><span class="icon">‚ÑπÔ∏è</span> System Info</div>
            </div>
            <div class="dash-info-grid">
              <div class="dash-info-item"><span class="dash-info-label">Version</span><span class="dash-info-value">v2.0.0</span></div>
              <div class="dash-info-item"><span class="dash-info-label">Backend</span><span class="dash-info-value">FastAPI + Uvicorn</span></div>
              <div class="dash-info-item"><span class="dash-info-label">Frontend</span><span class="dash-info-value">Vanilla JS + Chart.js</span></div>
              <div class="dash-info-item"><span class="dash-info-label">ML Framework</span><span class="dash-info-value">NumPy + Scikit-learn</span></div>
              <div class="dash-info-item"><span class="dash-info-label">DL Engine</span><span class="dash-info-value">Custom LSTM + Transformer</span></div>
              <div class="dash-info-item"><span class="dash-info-label">RAG</span><span class="dash-info-value">BM25+ / TF-IDF Hybrid</span></div>
            </div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 1. PRICING ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-pricing">
          <div class="section-header">
            <div class="section-title">‚ö° Option Pricing Engine</div>
            <div class="section-desc">Compute fair values using Black-Scholes analytics and Monte Carlo simulation simultaneously</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">üìê</span> Parameters</div>
              <span class="result-badge" id="resultBadge" style="display:none">‚Äî</span>
            </div>

            <div class="form-grid">
              <div class="field">
                <label for="spot">Spot Price ($)</label>
                <input type="number" id="spot" value="100" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="strike">Strike Price ($)</label>
                <input type="number" id="strike" value="100" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="rate">Risk-Free Rate</label>
                <input type="number" id="rate" value="0.05" step="0.001" />
              </div>
              <div class="field">
                <label for="sigma">Volatility (œÉ)</label>
                <input type="number" id="sigma" value="0.2" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="maturity">Maturity (years)</label>
                <input type="number" id="maturity" value="1" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="optType">Option Type</label>
                <select id="optType">
                  <option value="call">Call Option</option>
                  <option value="put">Put Option</option>
                </select>
              </div>
            </div>

            <div class="btn-group">
              <button class="btn btn-primary" id="priceBtn">‚ö° Price Option</button>
              <button class="btn btn-secondary" id="resetBtn">‚Üª Reset</button>
            </div>
          </div>

          <!-- Pricing Results -->
          <div class="metrics-row" id="pricingResults" style="display:none">
            <div class="metric-card">
              <div class="metric-label">Black-Scholes</div>
              <div class="metric-value highlight" id="bsPrice">‚Äî</div>
              <div class="metric-sub">Analytical Solution</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Monte Carlo</div>
              <div class="metric-value highlight" id="mcPrice">‚Äî</div>
              <div class="metric-sub">Simulation Estimate</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">MC Std Error</div>
              <div class="metric-value" id="mcStd">‚Äî</div>
              <div class="metric-sub">Standard Deviation</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">95% Confidence</div>
              <div class="metric-value" id="mcCI">‚Äî</div>
              <div class="metric-sub">Interval</div>
            </div>
          </div>

          <!-- Greeks Quick View -->
          <div class="greeks-grid" id="greeksQuick" style="display:none">
            <div class="greek-card" data-greek="delta">
              <div class="greek-symbol">Œî</div>
              <div class="greek-name">Delta</div>
              <div class="greek-value" id="qDelta">‚Äî</div>
            </div>
            <div class="greek-card" data-greek="gamma">
              <div class="greek-symbol">Œì</div>
              <div class="greek-name">Gamma</div>
              <div class="greek-value" id="qGamma">‚Äî</div>
            </div>
            <div class="greek-card" data-greek="theta">
              <div class="greek-symbol">Œò</div>
              <div class="greek-name">Theta</div>
              <div class="greek-value" id="qTheta">‚Äî</div>
            </div>
            <div class="greek-card" data-greek="vega">
              <div class="greek-symbol">ŒΩ</div>
              <div class="greek-name">Vega</div>
              <div class="greek-value" id="qVega">‚Äî</div>
            </div>
            <div class="greek-card" data-greek="rho">
              <div class="greek-symbol">œÅ</div>
              <div class="greek-name">Rho</div>
              <div class="greek-value" id="qRho">‚Äî</div>
            </div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 2. GREEKS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-greeks">
          <div class="section-header">
            <div class="section-title">Œî Greeks Surface Analysis</div>
            <div class="section-desc">Visualise sensitivity across the strike/spot spectrum</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">üéØ</span> Surface Parameters</div>
            </div>
            <div class="form-grid">
              <div class="field">
                <label for="greekSelect">Greek</label>
                <select id="greekSelect">
                  <option value="delta">Delta (Œî)</option>
                  <option value="gamma">Gamma (Œì)</option>
                  <option value="theta">Theta (Œò)</option>
                  <option value="vega">Vega (ŒΩ)</option>
                  <option value="rho">Rho (œÅ)</option>
                </select>
              </div>
              <div class="field">
                <label for="greekRange">Spot Range (%)</label>
                <input type="number" id="greekRange" value="30" min="5" max="80" step="5" />
              </div>
            </div>
            <div class="btn-group">
              <button class="btn btn-primary" id="plotGreekBtn">üìà Plot Surface</button>
            </div>
          </div>

          <div class="chart-container" style="display:none" id="greekChartWrap">
            <canvas id="greekChart"></canvas>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 3. MONTE CARLO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-monte-carlo">
          <div class="section-header">
            <div class="section-title">üé≤ Monte Carlo Simulation</div>
            <div class="section-desc">Geometric Brownian Motion path simulation with convergence analysis</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">‚öôÔ∏è</span> Simulation Settings</div>
            </div>
            <div class="mc-controls">
              <div class="field">
                <label for="mcPaths">Paths</label>
                <input type="number" id="mcPaths" value="200" min="10" max="2000" step="10" />
              </div>
              <div class="field">
                <label for="mcSteps">Steps</label>
                <input type="number" id="mcSteps" value="252" min="50" max="1000" step="1" />
              </div>
              <button class="btn btn-accent" id="simBtn">‚ñ∂ Run Simulation</button>
            </div>
          </div>

          <div class="charts-grid" id="mcChartsWrap" style="display:none">
            <div class="chart-container">
              <div class="card-title mb-4"><span class="icon">üìâ</span> Price Paths (GBM)</div>
              <canvas id="mcChart"></canvas>
            </div>
            <div class="chart-container">
              <div class="card-title mb-4"><span class="icon">üìä</span> Convergence</div>
              <canvas id="convChart"></canvas>
            </div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 4. DEEP LEARNING ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-deep-learning">
          <div class="section-header">
            <div class="section-title">üß† Deep Learning Forecast</div>
            <div class="section-desc">LSTM &amp; Transformer neural-network pricing with benchmark comparison</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">üî¨</span> Model Input</div>
            </div>
            <div class="form-grid">
              <div class="field">
                <label for="dlSpot">Spot</label>
                <input type="number" id="dlSpot" value="100" step="0.01" />
              </div>
              <div class="field">
                <label for="dlStrike">Strike</label>
                <input type="number" id="dlStrike" value="100" step="0.01" />
              </div>
              <div class="field">
                <label for="dlMaturity">Maturity</label>
                <input type="number" id="dlMaturity" value="1" step="0.01" />
              </div>
              <div class="field">
                <label for="dlRate">Rate</label>
                <input type="number" id="dlRate" value="0.05" step="0.001" />
              </div>
              <div class="field">
                <label for="dlSigma">Volatility</label>
                <input type="number" id="dlSigma" value="0.2" step="0.01" />
              </div>
              <div class="field">
                <label for="dlType">Type</label>
                <select id="dlType">
                  <option value="call">Call</option>
                  <option value="put">Put</option>
                </select>
              </div>
            </div>
            <div class="field" style="margin-top:0.6rem">
              <label for="dlNewsText">Market News <span style="color:var(--text-tertiary);font-weight:400">(optional ‚Äî enhances prediction with sentiment)</span></label>
              <textarea id="dlNewsText" rows="2" placeholder="Enter financial news for sentiment-adjusted pricing‚Ä¶"
                style="width:100%;resize:vertical;font-family:inherit;font-size:0.9rem;padding:0.65rem;border-radius:8px;border:1px solid var(--border);background:var(--bg-card);color:var(--text-primary)"></textarea>
            </div>
            <div class="btn-group">
              <button class="btn btn-primary" id="dlBtn">‚óé Forecast</button>
              <button class="btn btn-secondary" id="dlTrainBtn">‚öô Train Models</button>
              <button class="btn btn-secondary" id="dlStatusBtn">‚óà DL Status</button>
            </div>
          </div>

          <div class="dl-results" id="dlResults" style="display:none">
            <div class="metric-card">
              <div class="metric-label">DL Forecast</div>
              <div class="metric-value highlight" id="dlForecast">‚Äî</div>
              <div class="metric-sub">Hybrid prediction</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">LSTM Prediction</div>
              <div class="metric-value" id="dlLSTM">‚Äî</div>
              <div class="metric-sub">Neural price estimate</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Sentiment</div>
              <div class="metric-value" id="dlSentiment">‚Äî</div>
              <div class="metric-sub" id="dlSentLabel">Transformer NLP</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Confidence</div>
              <div class="metric-value" id="dlConfidence">‚Äî</div>
              <div class="metric-sub">Model certainty</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">BS Benchmark</div>
              <div class="metric-value" id="dlBS">‚Äî</div>
              <div class="metric-sub">Analytical</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">MC Benchmark</div>
              <div class="metric-value" id="dlMC">‚Äî</div>
              <div class="metric-sub">Simulation</div>
            </div>
          </div>

          <!-- DL Training Status -->
          <div class="card" id="dlTrainStatus" style="display:none;margin-top:1rem">
            <div class="card-header">
              <div class="card-title"><span class="icon">‚öô</span> Training Progress</div>
            </div>
            <div id="dlTrainInfo"></div>
          </div>

          <div class="chart-container" id="compChartWrap" style="display:none">
            <div class="card-title mb-4"><span class="icon">üìä</span> Model Comparison</div>
            <canvas id="compChart"></canvas>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 5. ML VOLATILITY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-ml-volatility">
          <div class="section-header">
            <div class="section-title">üìà ML Volatility Engine</div>
            <div class="section-desc">Production-grade ML volatility forecasting with walk-forward validation and model comparison</div>
          </div>

          <!-- ‚îÄ‚îÄ Engine Status Banner ‚îÄ‚îÄ -->
          <div class="card" id="volEngineStatus" style="margin-bottom:1.2rem">
            <div class="card-header">
              <div class="card-title"><span class="icon">‚ö°</span> Engine Status</div>
            </div>
            <div class="metrics-row" style="margin:0">
              <div class="metric-card">
                <div class="metric-label">Status</div>
                <div class="metric-value" id="engineStatusBadge">Not Trained</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Best Model</div>
                <div class="metric-value" id="engineBestModel">‚Äî</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Test RMSE</div>
                <div class="metric-value" id="engineBestRMSE">‚Äî</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Test R¬≤</div>
                <div class="metric-value" id="engineBestR2">‚Äî</div>
              </div>
            </div>
          </div>

          <!-- ‚îÄ‚îÄ Training Configuration ‚îÄ‚îÄ -->
          <div class="card" id="volTrainCard">
            <div class="card-header">
              <div class="card-title"><span class="icon">üß†</span> Model Training</div>
            </div>
            <div class="form-grid">
              <div class="field">
                <label for="volTarget">Volatility Target</label>
                <select id="volTarget">
                  <option value="realized_vol" selected>Realized Vol (Close-to-Close)</option>
                  <option value="parkinson_vol">Parkinson Vol (High-Low)</option>
                  <option value="garman_klass_vol">Garman-Klass Vol</option>
                </select>
              </div>
              <div class="field">
                <label for="volForwardWin">Forward Window (days)</label>
                <input type="number" id="volForwardWin" value="20" min="5" max="120" />
              </div>
              <div class="field">
                <label for="volNDays">Data Length (days)</label>
                <input type="number" id="volNDays" value="2520" min="200" max="10000" />
              </div>
              <div class="field">
                <label for="volCVFolds">CV Folds</label>
                <input type="number" id="volCVFolds" value="3" min="1" max="10" />
              </div>
            </div>
            <div class="field" style="margin-top:0.6rem">
              <label>Models to Train</label>
              <div style="display:flex;gap:0.7rem;flex-wrap:wrap;margin-top:0.3rem" id="volModelChecks">
                <label class="chk-label"><input type="checkbox" value="ridge" checked /> Ridge</label>
                <label class="chk-label"><input type="checkbox" value="lasso" checked /> Lasso</label>
                <label class="chk-label"><input type="checkbox" value="random_forest" checked /> Random Forest</label>
                <label class="chk-label"><input type="checkbox" value="gradient_boosting" checked /> GBM</label>
                <label class="chk-label"><input type="checkbox" value="ensemble_stack" checked /> Ensemble</label>
                <label class="chk-label"><input type="checkbox" value="lstm" /> LSTM</label>
                <label class="chk-label"><input type="checkbox" value="temporal_cnn" /> CNN</label>
              </div>
            </div>
            <div class="btn-group" style="margin-top:1rem">
              <button class="btn btn-primary" id="volTrainBtn">üöÇ Train Models</button>
              <button class="btn btn-secondary" id="volStatusBtn">üìä Refresh Status</button>
            </div>
            <div id="volTrainProgress" style="display:none;margin-top:0.8rem;">
              <div style="display:flex;align-items:center;gap:0.6rem">
                <div class="spinner" style="width:18px;height:18px;border:2px solid rgba(99,102,241,.3);border-top-color:#6366f1;border-radius:50%;animation:spin .8s linear infinite"></div>
                <span style="color:var(--text-secondary);font-size:0.85rem" id="volTrainMsg">Training in progress...</span>
              </div>
            </div>
          </div>

          <!-- ‚îÄ‚îÄ Model Comparison Table ‚îÄ‚îÄ -->
          <div class="card" id="volComparisonCard" style="display:none;margin-top:1.2rem">
            <div class="card-header">
              <div class="card-title"><span class="icon">üìä</span> Model Comparison</div>
            </div>
            <div style="overflow-x:auto">
              <table class="vol-table" id="volCompTable">
                <thead>
                  <tr>
                    <th>Model</th>
                    <th>RMSE ‚Üì</th>
                    <th>MAE</th>
                    <th>MAPE %</th>
                    <th>R¬≤</th>
                    <th>Dir.Acc %</th>
                    <th>vs Hist %</th>
                    <th>vs GARCH %</th>
                    <th>vs EWMA %</th>
                    <th>Time (ms)</th>
                  </tr>
                </thead>
                <tbody id="volCompBody"></tbody>
              </table>
            </div>
            <!-- Baseline row -->
            <div class="metrics-row" style="margin-top:0.8rem" id="volBaselineRow"></div>
          </div>

          <!-- ‚îÄ‚îÄ Feature Importance Chart ‚îÄ‚îÄ -->
          <div class="card" id="volFeatureCard" style="display:none;margin-top:1.2rem">
            <div class="card-header">
              <div class="card-title"><span class="icon">üèÜ</span> Top Feature Importance (Best Model)</div>
            </div>
            <div class="chart-container" style="max-height:350px">
              <canvas id="volFeatureChart"></canvas>
            </div>
          </div>

          <!-- ‚îÄ‚îÄ IV Prediction (enhanced) ‚îÄ‚îÄ -->
          <div class="card" style="margin-top:1.2rem">
            <div class="card-header">
              <div class="card-title"><span class="icon">üîÆ</span> Single-Point IV Prediction</div>
            </div>
            <div class="form-grid">
              <div class="field">
                <label for="mlSpot">Spot Price</label>
                <input type="number" id="mlSpot" value="100" step="0.01" />
              </div>
              <div class="field">
                <label for="mlRate">Interest Rate</label>
                <input type="number" id="mlRate" value="0.05" step="0.001" />
              </div>
              <div class="field">
                <label for="mlMat">Maturity</label>
                <input type="number" id="mlMat" value="0.5" step="0.01" />
              </div>
              <div class="field">
                <label for="mlRvol">Realized Vol</label>
                <input type="number" id="mlRvol" value="0.18" step="0.01" />
              </div>
              <div class="field">
                <label for="mlVix">VIX Level</label>
                <input type="number" id="mlVix" value="20" step="0.1" />
              </div>
              <div class="field">
                <label for="mlSkew">Skew Index</label>
                <input type="number" id="mlSkew" value="-0.15" step="0.01" />
              </div>
            </div>
            <div class="btn-group">
              <button class="btn btn-primary" id="mlBtn">üìà Predict IV</button>
            </div>
          </div>

          <div class="metrics-row" id="mlResults" style="display:none;margin-top:1rem">
            <div class="metric-card">
              <div class="metric-label">Implied Volatility</div>
              <div class="metric-value highlight" id="mlIV">‚Äî</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Market Regime</div>
              <div class="metric-value" id="mlRegime">‚Äî</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Model Used</div>
              <div class="metric-value" id="mlModelUsed">‚Äî</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Confidence (R¬≤)</div>
              <div class="metric-value" id="mlConfidence">‚Äî</div>
            </div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 6. MARKET SENTIMENT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-sentiment">
          <div class="section-header">
            <div class="section-title">‚óâ Market Sentiment Analysis</div>
            <div class="section-desc">Financial news NLP powered by Transformer attention &amp; lexicon scoring</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">üìù</span> Analyze Financial Text</div>
            </div>
            <div class="field" style="margin-bottom:1rem">
              <label for="sentimentText">Financial News / Market Commentary</label>
              <textarea id="sentimentText" rows="4" placeholder="Paste financial news, earnings reports, or market commentary here‚Ä¶&#10;&#10;Example: Federal Reserve signals potential rate cuts amid cooling inflation, boosting market sentiment across tech sector."
                style="width:100%;resize:vertical;font-family:inherit;font-size:0.9rem;padding:0.75rem;border-radius:8px;border:1px solid var(--border);background:var(--bg-card);color:var(--text-primary)"></textarea>
            </div>
            <div class="btn-group">
              <button class="btn btn-primary" id="sentimentBtn">‚óâ Analyze Sentiment</button>
              <button class="btn btn-secondary" id="sentimentClearBtn">‚Üª Clear</button>
            </div>
          </div>

          <!-- Quick Examples -->
          <div class="card" style="margin-top:1rem">
            <div class="card-header">
              <div class="card-title"><span class="icon">‚ö°</span> Quick Examples</div>
            </div>
            <div class="quick-chips" id="sentimentChips">
              <span class="chip" data-text="Strong earnings beat expectations with record revenue growth. Company raises full-year guidance significantly.">Bullish Earnings</span>
              <span class="chip" data-text="Markets tumble as recession fears mount. Unemployment claims surge to highest level in two years.">Bearish Macro</span>
              <span class="chip" data-text="Federal Reserve maintains current interest rate policy, signaling a wait-and-see approach to inflation data.">Neutral Fed</span>
              <span class="chip" data-text="Massive short squeeze drives volatility to extreme levels. Options market sees unprecedented put-call ratio reversal.">High Volatility</span>
            </div>
          </div>

          <!-- Sentiment Results -->
          <div id="sentimentResults" style="display:none;margin-top:1rem">
            <div class="metrics-row">
              <div class="metric-card">
                <div class="metric-label">Overall Sentiment</div>
                <div class="metric-value highlight" id="sentScore">‚Äî</div>
                <div class="metric-sub" id="sentLabel">‚Äî</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Confidence</div>
                <div class="metric-value" id="sentConfidence">‚Äî</div>
                <div class="metric-sub">Model certainty</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Bullish Score</div>
                <div class="metric-value" id="sentBullish" style="color:#00e5a0">‚Äî</div>
                <div class="metric-sub">Positive signals</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Bearish Score</div>
                <div class="metric-value" id="sentBearish" style="color:#ff5c7c">‚Äî</div>
                <div class="metric-sub">Negative signals</div>
              </div>
            </div>

            <!-- Sentiment Gauge -->
            <div class="card" style="margin-top:1rem">
              <div class="card-header">
                <div class="card-title"><span class="icon">üìä</span> Sentiment Gauge</div>
              </div>
              <div class="sentiment-gauge-wrap">
                <div class="sentiment-gauge">
                  <div class="gauge-fill" id="sentGaugeFill"></div>
                  <div class="gauge-marker" id="sentGaugeMarker"></div>
                </div>
                <div class="gauge-labels">
                  <span style="color:#ff5c7c">Very Bearish</span>
                  <span style="color:var(--text-secondary)">Neutral</span>
                  <span style="color:#00e5a0">Very Bullish</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 7. RISK ANALYTICS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-risk-analytics">
          <div class="section-header">
            <div class="section-title">‚äò Risk Analytics</div>
            <div class="section-desc">Value-at-Risk, position analysis, and risk decomposition</div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title"><span class="icon">‚ö†Ô∏è</span> Value-at-Risk Calculator</div>
            </div>
            <div class="form-grid">
              <div class="field">
                <label for="varSpot">Spot Price ($)</label>
                <input type="number" id="varSpot" value="100" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="varStrike">Strike ($)</label>
                <input type="number" id="varStrike" value="100" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="varSigma">Volatility (œÉ)</label>
                <input type="number" id="varSigma" value="0.2" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="varRate">Risk-Free Rate</label>
                <input type="number" id="varRate" value="0.05" step="0.001" />
              </div>
              <div class="field">
                <label for="varMaturity">Maturity (years)</label>
                <input type="number" id="varMaturity" value="1" step="0.01" min="0.01" />
              </div>
              <div class="field">
                <label for="varType">Option Type</label>
                <select id="varType">
                  <option value="call">Call Option</option>
                  <option value="put">Put Option</option>
                </select>
              </div>
              <div class="field">
                <label for="varContracts">Contracts</label>
                <input type="number" id="varContracts" value="10" step="1" min="1" />
              </div>
              <div class="field">
                <label for="varConfidence">Confidence Level</label>
                <select id="varConfidence">
                  <option value="0.95">95%</option>
                  <option value="0.99" selected>99%</option>
                  <option value="0.999">99.9%</option>
                </select>
              </div>
            </div>
            <div class="btn-group">
              <button class="btn btn-primary" id="varCalcBtn">‚äò Calculate VaR</button>
            </div>
          </div>

          <!-- VaR Results -->
          <div id="varResults" style="display:none;margin-top:1rem">
            <div class="metrics-row">
              <div class="metric-card">
                <div class="metric-label">Delta-Normal VaR</div>
                <div class="metric-value highlight" id="varDeltaNormal">‚Äî</div>
                <div class="metric-sub">1-day loss estimate</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Position Value</div>
                <div class="metric-value" id="varPosition">‚Äî</div>
                <div class="metric-sub">Total market value</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Max Loss %</div>
                <div class="metric-value" id="varPctLoss" style="color:#ff5c7c">‚Äî</div>
                <div class="metric-sub">Relative VaR</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Greeks Exposure</div>
                <div class="metric-value" id="varGreeksExp">‚Äî</div>
                <div class="metric-sub">Delta √ó Contracts</div>
              </div>
            </div>

            <!-- Risk Decomposition -->
            <div class="card" style="margin-top:1rem">
              <div class="card-header">
                <div class="card-title"><span class="icon">üìä</span> Risk Decomposition</div>
              </div>
              <div class="risk-breakdown" id="riskBreakdown">
                <div class="risk-item">
                  <span class="risk-label">Delta Risk</span>
                  <div class="risk-bar-container"><div class="risk-bar" id="riskBarDelta" style="width:0%"></div></div>
                  <span class="risk-value" id="riskValDelta">‚Äî</span>
                </div>
                <div class="risk-item">
                  <span class="risk-label">Gamma Risk</span>
                  <div class="risk-bar-container"><div class="risk-bar risk-bar-gamma" id="riskBarGamma" style="width:0%"></div></div>
                  <span class="risk-value" id="riskValGamma">‚Äî</span>
                </div>
                <div class="risk-item">
                  <span class="risk-label">Vega Risk</span>
                  <div class="risk-bar-container"><div class="risk-bar risk-bar-vega" id="riskBarVega" style="width:0%"></div></div>
                  <span class="risk-value" id="riskValVega">‚Äî</span>
                </div>
                <div class="risk-item">
                  <span class="risk-label">Theta Risk</span>
                  <div class="risk-bar-container"><div class="risk-bar risk-bar-theta" id="riskBarTheta" style="width:0%"></div></div>
                  <span class="risk-value" id="riskValTheta">‚Äî</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 8. AI EXPLAINABILITY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="section" id="sec-explainability">
          <div class="section-header">
            <div class="section-title">üí° AI Explainability Engine</div>
            <div class="section-desc">RAG-powered Q&amp;A ‚Äî ask anything about quantitative finance</div>
          </div>

          <!-- RAG Stats Bar -->
          <div class="rag-stats-bar" id="ragStatsBar">
            <div class="rag-stat-item">
              <span class="rag-stat-icon">üìö</span>
              <span class="rag-stat-value" id="ragDocCount">‚Äî</span>
              <span class="rag-stat-label">Chunks</span>
            </div>
            <div class="rag-stat-item">
              <span class="rag-stat-icon">üìÑ</span>
              <span class="rag-stat-value" id="ragSourceCount">‚Äî</span>
              <span class="rag-stat-label">Sources</span>
            </div>
            <div class="rag-stat-item">
              <span class="rag-stat-icon">‚ö°</span>
              <span class="rag-stat-value" id="ragAvgLatency">‚Äî</span>
              <span class="rag-stat-label">Avg ms</span>
            </div>
            <div class="rag-stat-item">
              <span class="rag-stat-icon">üéØ</span>
              <span class="rag-stat-value" id="ragCacheRate">‚Äî</span>
              <span class="rag-stat-label">Cache Hit</span>
            </div>
          </div>

          <div class="card">
            <div class="chat-area" id="chatArea"></div>

            <div class="chat-input-row">
              <input type="text" id="ragInput" placeholder="Ask about Black-Scholes, Greeks, Monte Carlo, Heston, hedging‚Ä¶" />
              <button class="btn btn-primary" id="ragBtn">Ask ‚Üí</button>
            </div>

            <!-- Follow-up suggestions (dynamic) -->
            <div class="follow-ups" id="followUps" style="display:none">
              <span class="follow-up-label">Suggested:</span>
              <div class="follow-up-chips" id="followUpChips"></div>
            </div>

            <div class="quick-chips" id="quickChips">
              <span class="chip" data-q="Explain the Black-Scholes formula">Black-Scholes</span>
              <span class="chip" data-q="What are the Greeks in option pricing?">Greeks Basics</span>
              <span class="chip" data-q="How does Monte Carlo simulation price options?">Monte Carlo</span>
              <span class="chip" data-q="Compare LSTM vs Transformer for pricing">DL Comparison</span>
              <span class="chip" data-q="What is implied volatility surface?">IV Surface</span>
              <span class="chip" data-q="How does the Heston stochastic volatility model work?">Heston Model</span>
              <span class="chip" data-q="What variance reduction techniques improve Monte Carlo?">Variance Reduction</span>
              <span class="chip" data-q="When should you exercise an American option early?">American Options</span>
              <span class="chip" data-q="How does delta-gamma hedging work?">Delta-Gamma Hedge</span>
            </div>
          </div>

          <div class="rag-meta" id="ragMeta" style="display:none">
            <div class="rag-meta-top">
              <div class="confidence-section">
                <div class="confidence-label">
                  <span>Confidence</span>
                  <span id="confLabel">0%</span>
                </div>
                <div class="confidence-bar">
                  <div class="confidence-fill" id="confFill"></div>
                </div>
              </div>
              <div class="rag-meta-badges">
                <span class="rag-badge" id="queryTypeBadge">‚Äî</span>
                <span class="rag-badge" id="latencyBadge">‚Äî</span>
                <span class="rag-badge rag-badge-cache" id="cacheBadge" style="display:none">‚ö° cached</span>
              </div>
            </div>
            <div class="source-list" id="sourceList"></div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toasts"></div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div>
      <div class="spinner"></div>
      <div class="loading-text">Computing‚Ä¶</div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  <script src="app.js"></script>
  <script src="premium-motion.js"></script>
</body>
</html>
